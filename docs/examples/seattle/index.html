<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <link rel="icon" crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.15.0/dist/favicon.ico" />
    <!-- Preload is necessary because we show these images when we disconnect from the server,
    but at that point we cannot load these images from the server -->
    <link rel="preload" crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.15.0/dist/assets/gradient-yHQUC_QB.png" as="image" />
    <link rel="preload" crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.15.0/dist/assets/noise-60BoTA8O.png" as="image" />
    <!-- Preload the fonts -->
    <link rel="preload" crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.15.0/dist/assets/Lora-VariableFont_wght-B2ootaw-.ttf" as="font" crossorigin="anonymous" />
    <link rel="preload" crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.15.0/dist/assets/PTSans-Regular-CxL0S8W7.ttf" as="font" crossorigin="anonymous" />
    <link rel="preload" crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.15.0/dist/assets/PTSans-Bold-D9fedIX3.ttf" as="font" crossorigin="anonymous" />
    <link rel="preload" crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.15.0/dist/assets/FiraMono-Regular-BTCkDNvf.ttf" as="font" crossorigin="anonymous" />
    <link rel="preload" crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.15.0/dist/assets/FiraMono-Medium-DU3aDxX5.ttf" as="font" crossorigin="anonymous" />
    <link rel="preload" crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.15.0/dist/assets/FiraMono-Bold-CLVRCuM9.ttf" as="font" crossorigin="anonymous" />

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="theme-color" content="#000000" />
    <meta name="description" content="a marimo app" />
    <link rel="apple-touch-icon" crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.15.0/dist/apple-touch-icon.png" />
    <link rel="manifest" crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.15.0/dist/manifest.json" />

    <script data-marimo="true">
      function __resizeIframe(obj) {
        var scrollbarHeight = 20; // Max between windows, mac, and linux

        function setHeight() {
          var element = obj.contentWindow.document.documentElement;
          // If there is no vertical scrollbar, we don't need to resize the iframe
          if (element.scrollHeight === element.clientHeight) {
            return;
          }

          // Create a new height that includes the scrollbar height if it's visible
          var hasHorizontalScrollbar = element.scrollWidth > element.clientWidth;
          var newHeight = element.scrollHeight + (hasHorizontalScrollbar ? scrollbarHeight : 0);

          // Only update the height if it's different from the current height
          if (obj.style.height !== `${newHeight}px`) {
            obj.style.height = `${newHeight}px`;
          }
        }

        // Resize the iframe to the height of the content and bottom scrollbar height
        setHeight();

        // Resize the iframe when the content changes
        const resizeObserver = new ResizeObserver((entries) => {
          setHeight();
        });
        resizeObserver.observe(obj.contentWindow.document.body);
      }
    </script>
    <marimo-filename hidden>seattle.py</marimo-filename>
    <!-- TODO(Trevor): Legacy, required by VS Code plugin. Remove when plugin is updated (see marimo/server/_templates/template.py) -->
    <marimo-version data-version="{{ version }}" hidden></marimo-version>
    <marimo-user-config data-config="{{ user_config }}" hidden></marimo-user-config>
    <marimo-server-token data-token="{{ server_token }}" hidden></marimo-server-token>
    <!-- /TODO -->
    <title>seattle</title>
    <script type="module" crossorigin crossorigin="anonymous" src="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.15.0/dist/assets/index-D4bXoNM3.js"></script>
    <link rel="stylesheet" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.15.0/dist/assets/index-CrH6PPjG.css">
  
<script data-marimo="true">
    window.__MARIMO_STATIC__ = {};
    window.__MARIMO_STATIC__.files = {};
</script>
</head>
  <body>
    <div id="root"></div>
    <!-- This is a portal for the data editor to render in -->
    <div id="portal" data-testid="glide-portal" style="position: fixed; left: 0; top: 0; z-index: 9999"></div>
    <script data-marimo="true">
      window.__MARIMO_MOUNT_CONFIG__ = {
            "filename": "seattle.py",
            "mode": "read",
            "version": "0.15.0",
            "serverToken": "static",
            "config": {"ai": {"models": {"custom_models": [], "displayed_models": []}}, "completion": {"activate_on_typing": true, "copilot": false}, "display": {"cell_output": "above", "code_editor_font_size": 14, "dataframes": "rich", "default_table_max_columns": 50, "default_table_page_size": 10, "default_width": "medium", "reference_highlighting": false, "theme": "light"}, "formatting": {"line_length": 79}, "keymap": {"overrides": {}, "preset": "default"}, "language_servers": {"pylsp": {"enable_flake8": false, "enable_mypy": true, "enable_pydocstyle": false, "enable_pyflakes": false, "enable_pylint": false, "enable_ruff": true, "enabled": true}}, "package_management": {"manager": "pip"}, "runtime": {"auto_instantiate": true, "auto_reload": "off", "default_sql_output": "auto", "on_cell_change": "autorun", "output_max_bytes": 8000000, "reactive_tests": true, "std_stream_max_bytes": 1000000, "watcher_on_save": "lazy"}, "save": {"autosave": "after_delay", "autosave_delay": 1000, "format_on_save": false}, "server": {"browser": "default", "follow_symlink": false}, "snippets": {"custom_paths": [], "include_default_snippets": true}},
            "configOverrides": {},
            "appConfig": {"sql_output": "auto", "width": "medium"},
            "view": {"showAppCode": true},
            "notebook": {"cells": [{"code": "import os\n\nfrom dotenv import load_dotenv\nimport marimo as mo\nimport pandas as pd\n\nfrom dotgov.constants import SEATTLE\nfrom dotgov.socrata import Socrata, create_where_clause", "code_hash": "0f8e55c7bb0e82b1e252448651f5707f", "config": {"column": null, "disabled": false, "hide_code": false}, "id": "Hbol", "name": "_"}, {"code": "_ = load_dotenv()\n\napp_token = os.getenv(\"SOCRATA_TOKEN\")", "code_hash": "3b1a7b3c5ac9fce2e0695060da746899", "config": {"column": null, "disabled": false, "hide_code": false}, "id": "MJUe", "name": "_"}, {"code": "mo.md(r\"\"\"## Discover datasets in Seattle\"\"\")", "code_hash": "bf2ca0dd7fe4d35d00a5608be44f1409", "config": {"column": null, "disabled": false, "hide_code": false}, "id": "Hstk", "name": "_"}, {"code": "with Socrata(SEATTLE, app_token=app_token) as client:\n    datasets = [dataset for dataset in client.discover()]\n\nprint(f\"There are {len(datasets)} datasets in {SEATTLE}\")", "code_hash": "7e6b8fc005fb0a7be5a961f9b83584bf", "config": {"column": null, "disabled": false, "hide_code": false}, "id": "nWHF", "name": "_"}, {"code": "cols = [\n    \"id\",\n    \"name\",\n    \"attribution\",\n    \"description\",\n    \"type\",\n    \"createdAt\",\n    \"updatedAt\",\n    \"data_updated_at\",\n    \"publication_date\",\n]\n\nresources = [\n    {k: v for k, v in d.get(\"resource\", {}).items() if k in cols}\n    for d in datasets\n]\n\n\ndf_datasets = pd.DataFrame(resources)\n\ndate_cols = [\"createdAt\", \"updatedAt\", \"data_updated_at\", \"publication_date\"]\n\ndf_datasets[date_cols] = df_datasets[date_cols].apply(\n    pd.to_datetime, errors=\"coerce\"\n)\n\ndf_datasets = df_datasets.set_index(\"id\").sort_values(\n    by=\"data_updated_at\", ascending=False\n)\n\ndf_datasets", "code_hash": "9f717f21e17a5c614196605f4dcc79b5", "config": {"column": null, "disabled": false, "hide_code": false}, "id": "WotG", "name": "_"}, {"code": "mo.md(r\"\"\"## Detail of 911 calls\"\"\")", "code_hash": "10a495ee3099cc9db628d0e8da851bc7", "config": {"column": null, "disabled": false, "hide_code": false}, "id": "ROlb", "name": "_"}, {"code": "calls_where = create_where_clause(\n    datetime=(\"2025-08-01T00:00:00\", \"2025-08-21T23:59:59\"),\n    type=[\n        \"Multiple Casualty Incident\",\n        \"Rescue Automobile\",\n        \"Activated CO Detector\",\n    ],\n)\n\ncalls = []\n\nwith Socrata(SEATTLE, version=3.0, app_token=app_token) as s:\n    for qr in s.query_resource(\n        identifier=\"kzjm-xkqj\",\n        filters={\n            \"where\": calls_where,\n            \"order\": \"datetime DESC\",\n            \"includeSystem\": \"false\",\n            \"includeSynthetic\": \"false\",\n        },\n    ):\n        calls.append(qr)", "code_hash": "384738790fc9808ce76adc63981d76d0", "config": {"column": null, "disabled": false, "hide_code": false}, "id": "qnkX", "name": "_"}, {"code": "df_calls = pd.DataFrame(calls)\n\ndf_calls[\"datetime\"] = df_calls[\"datetime\"].apply(pd.to_datetime, errors=\"coerce\")\n\ndf_calls = df_calls.set_index(\"incident_number\").sort_values(\n    by=\"datetime\", ascending=False\n)\n\ndf_calls", "code_hash": "7d85abf074886160f8a301793966dc67", "config": {"column": null, "disabled": false, "hide_code": false}, "id": "TqIu", "name": "_"}], "metadata": {"marimo_version": "0.15.0"}, "version": "1"},
            "session": {"cells": [{"code_hash": "0f8e55c7bb0e82b1e252448651f5707f", "console": [], "id": "Hbol", "outputs": [{"data": {"text/plain": ""}, "type": "data"}]}, {"code_hash": "3b1a7b3c5ac9fce2e0695060da746899", "console": [], "id": "MJUe", "outputs": [{"data": {"text/plain": ""}, "type": "data"}]}, {"code_hash": "bf2ca0dd7fe4d35d00a5608be44f1409", "console": [], "id": "Hstk", "outputs": [{"data": {"text/html": "<span class=\"markdown prose dark:prose-invert\"><h2 id=\"discover-datasets-in-seattle\">Discover datasets in Seattle</h2></span>"}, "type": "data"}]}, {"code_hash": "7e6b8fc005fb0a7be5a961f9b83584bf", "console": [{"name": "stdout", "text": "There are 132 datasets in data.seattle.gov\n", "type": "stream"}], "id": "nWHF", "outputs": [{"data": {"text/plain": ""}, "type": "data"}]}, {"code_hash": "9f717f21e17a5c614196605f4dcc79b5", "console": [], "id": "WotG", "outputs": [{"data": {"text/html": "<marimo-ui-element object-id='WotG-0' random-id='78dcc1f4-a953-63db-10aa-9dfff165e25c'><marimo-table data-initial-value='[]' data-label='null' data-data='&quot;[{&#92;&quot;id&#92;&quot;:&#92;&quot;kzjm-xkqj&#92;&quot;,&#92;&quot;name&#92;&quot;:&#92;&quot;Seattle Real Time Fire 911 Calls&#92;&quot;,&#92;&quot;description&#92;&quot;:&#92;&quot;Provides Seattle Fire Department 911 dispatches. Updated every 5 minutes.&#92;&quot;,&#92;&quot;attribution&#92;&quot;:&#92;&quot;City of Seattle&#92;&quot;,&#92;&quot;type&#92;&quot;:&#92;&quot;dataset&#92;&quot;,&#92;&quot;updatedAt&#92;&quot;:&#92;&quot;2025-08-23T06:10:56.000Z&#92;&quot;,&#92;&quot;createdAt&#92;&quot;:&#92;&quot;2010-01-08T21:48:17.000Z&#92;&quot;,&#92;&quot;data_updated_at&#92;&quot;:&#92;&quot;2025-08-23T06:10:56.000Z&#92;&quot;,&#92;&quot;publication_date&#92;&quot;:&#92;&quot;2019-04-26T00:00:46.000Z&#92;&quot;},{&#92;&quot;id&#92;&quot;:&#92;&quot;egc4-d24i&#92;&quot;,&#92;&quot;name&#92;&quot;:&#92;&quot;Road Weather Information Stations&#92;&quot;,&#92;&quot;description&#92;&quot;:&#92;&quot;This data is derived from sensor stations placed on bridges and surface streets within city limits.  Each station has a temperature sensor that measures the temperature of the street surface and a sensor that measures the ambient air temperature at the station each second.  Those values are averaged into temperature readings that are recorded by the station every minute.  The dataset is updated hourly with new data. Only the most recent 48 hours of data is stored in the dataset.&#92;&quot;,&#92;&quot;attribution&#92;&quot;:&#92;&quot;City of Seattle&#92;&quot;,&#92;&quot;type&#92;&quot;:&#92;&quot;dataset&#92;&quot;,&#92;&quot;updatedAt&#92;&quot;:&#92;&quot;2025-08-23T05:22:44.000Z&#92;&quot;,&#92;&quot;createdAt&#92;&quot;:&#92;&quot;2014-03-04T15:24:22.000Z&#92;&quot;,&#92;&quot;data_updated_at&#92;&quot;:&#92;&quot;2025-08-23T05:22:44.000Z&#92;&quot;,&#92;&quot;publication_date&#92;&quot;:&#92;&quot;2019-08-21T19:41:43.000Z&#92;&quot;},{&#92;&quot;id&#92;&quot;:&#92;&quot;76t5-zqzr&#92;&quot;,&#92;&quot;name&#92;&quot;:&#92;&quot;Building Permits&#92;&quot;,&#92;&quot;description&#92;&quot;:&#92;&quot;All building permits issued or in progress within the city of Seattle.&#92;&quot;,&#92;&quot;attribution&#92;&quot;:&#92;&quot;City of Seattle&#92;&quot;,&#92;&quot;type&#92;&quot;:&#92;&quot;dataset&#92;&quot;,&#92;&quot;updatedAt&#92;&quot;:&#92;&quot;2025-08-23T01:46:10.000Z&#92;&quot;,&#92;&quot;createdAt&#92;&quot;:&#92;&quot;2017-07-06T23:41:05.000Z&#92;&quot;,&#92;&quot;data_updated_at&#92;&quot;:&#92;&quot;2025-08-23T01:46:10.000Z&#92;&quot;,&#92;&quot;publication_date&#92;&quot;:&#92;&quot;2023-08-17T17:14:36.000Z&#92;&quot;},{&#92;&quot;id&#92;&quot;:&#92;&quot;c4tj-daue&#92;&quot;,&#92;&quot;name&#92;&quot;:&#92;&quot;Electrical Permits&#92;&quot;,&#92;&quot;description&#92;&quot;:&#92;&quot;All electrical permits issued or in process in the city of Seattle.&#92;&quot;,&#92;&quot;attribution&#92;&quot;:&#92;&quot;City of Seattle&#92;&quot;,&#92;&quot;type&#92;&quot;:&#92;&quot;dataset&#92;&quot;,&#92;&quot;updatedAt&#92;&quot;:&#92;&quot;2025-08-23T01:23:26.000Z&#92;&quot;,&#92;&quot;createdAt&#92;&quot;:&#92;&quot;2018-04-23T21:29:29.000Z&#92;&quot;,&#92;&quot;data_updated_at&#92;&quot;:&#92;&quot;2025-08-23T01:23:26.000Z&#92;&quot;,&#92;&quot;publication_date&#92;&quot;:&#92;&quot;2019-07-12T19:51:51.000Z&#92;&quot;},{&#92;&quot;id&#92;&quot;:&#92;&quot;xvj2-ai6y&#92;&quot;,&#92;&quot;name&#92;&quot;:&#92;&quot;Underground Storage Tank (UST) Records - Residential&#92;&quot;,&#92;&quot;description&#92;&quot;:&#92;&quot;Records of Seattle Fire Department (SFD) permits related to decommissioning of a residential heating oil tank, permit code 6103.  A record with incomplete tank info indicates that the required follow-up report has not been received by SFD.  Please note that SFD records begin in 1996 when state requirement was introduced.  Decommissioning of a residential heating oil tank might have occurred prior to 1996, in which SFD will not have a record.&#92;&#92;r&#92;&#92;nCommercial UST records can be requested through City Public Records Request Center at http://www.seattle.gov/public-records/public-records-request-center&#92;&quot;,&#92;&quot;attribution&#92;&quot;:&#92;&quot;City of Seattle&#92;&quot;,&#92;&quot;type&#92;&quot;:&#92;&quot;dataset&#92;&quot;,&#92;&quot;updatedAt&#92;&quot;:&#92;&quot;2025-08-23T01:14:41.000Z&#92;&quot;,&#92;&quot;createdAt&#92;&quot;:&#92;&quot;2017-03-08T19:19:33.000Z&#92;&quot;,&#92;&quot;data_updated_at&#92;&quot;:&#92;&quot;2025-08-23T01:14:41.000Z&#92;&quot;,&#92;&quot;publication_date&#92;&quot;:&#92;&quot;2025-02-13T20:03:37.000Z&#92;&quot;},{&#92;&quot;id&#92;&quot;:&#92;&quot;3qih-4uwq&#92;&quot;,&#92;&quot;name&#92;&quot;:&#92;&quot;Code Compliance Violations by Year&#92;&quot;,&#92;&quot;description&#92;&quot;:&#92;&quot;Code Compliance violations by type per year. Sort the Year column by descending order to see the most recent years.&#92;&quot;,&#92;&quot;attribution&#92;&quot;:&#92;&quot;Seattle Department of Construction and Inspections&#92;&quot;,&#92;&quot;type&#92;&quot;:&#92;&quot;dataset&#92;&quot;,&#92;&quot;updatedAt&#92;&quot;:&#92;&quot;2025-08-23T00:36:55.000Z&#92;&quot;,&#92;&quot;createdAt&#92;&quot;:&#92;&quot;2018-12-12T20:04:21.000Z&#92;&quot;,&#92;&quot;data_updated_at&#92;&quot;:&#92;&quot;2025-08-23T00:36:55.000Z&#92;&quot;,&#92;&quot;publication_date&#92;&quot;:&#92;&quot;2021-04-22T23:36:22.000Z&#92;&quot;},{&#92;&quot;id&#92;&quot;:&#92;&quot;c87v-5hwh&#92;&quot;,&#92;&quot;name&#92;&quot;:&#92;&quot;Trade Permits&#92;&quot;,&#92;&quot;description&#92;&quot;:&#92;&quot;All trade permits in progress or that have been issued in Seattle.&#92;&quot;,&#92;&quot;attribution&#92;&quot;:&#92;&quot;City of Seattle&#92;&quot;,&#92;&quot;type&#92;&quot;:&#92;&quot;dataset&#92;&quot;,&#92;&quot;updatedAt&#92;&quot;:&#92;&quot;2025-08-23T00:31:50.000Z&#92;&quot;,&#92;&quot;createdAt&#92;&quot;:&#92;&quot;2018-05-01T17:16:17.000Z&#92;&quot;,&#92;&quot;data_updated_at&#92;&quot;:&#92;&quot;2025-08-23T00:31:50.000Z&#92;&quot;,&#92;&quot;publication_date&#92;&quot;:&#92;&quot;2019-07-12T19:29:38.000Z&#92;&quot;},{&#92;&quot;id&#92;&quot;:&#92;&quot;4m8w-zxcb&#92;&quot;,&#92;&quot;name&#92;&quot;:&#92;&quot;Code Compliance Violations by Month&#92;&quot;,&#92;&quot;description&#92;&quot;:&#92;&quot;Number of code compliance violations, by type, by month since 2003. Sort the Date column in descending order to see the most recent months.&#92;&quot;,&#92;&quot;attribution&#92;&quot;:&#92;&quot;Seattle Department of Construction and Inspections&#92;&quot;,&#92;&quot;type&#92;&quot;:&#92;&quot;dataset&#92;&quot;,&#92;&quot;updatedAt&#92;&quot;:&#92;&quot;2025-08-23T00:31:30.000Z&#92;&quot;,&#92;&quot;createdAt&#92;&quot;:&#92;&quot;2018-12-12T19:40:30.000Z&#92;&quot;,&#92;&quot;data_updated_at&#92;&quot;:&#92;&quot;2025-08-23T00:31:30.000Z&#92;&quot;,&#92;&quot;publication_date&#92;&quot;:&#92;&quot;2018-12-14T16:32:34.000Z&#92;&quot;},{&#92;&quot;id&#92;&quot;:&#92;&quot;j2xh-c7vt&#92;&quot;,&#92;&quot;name&#92;&quot;:&#92;&quot;Rental Property Registration&#92;&quot;,&#92;&quot;description&#92;&quot;:&#92;&quot;A list of properties that have registered their rental units with the City of Seattle under the Rental Registration and Inspection Ordinance.&#92;&quot;,&#92;&quot;attribution&#92;&quot;:&#92;&quot;City of Seattle&#92;&quot;,&#92;&quot;type&#92;&quot;:&#92;&quot;dataset&#92;&quot;,&#92;&quot;updatedAt&#92;&quot;:&#92;&quot;2025-08-23T00:30:14.000Z&#92;&quot;,&#92;&quot;createdAt&#92;&quot;:&#92;&quot;2018-04-26T14:56:08.000Z&#92;&quot;,&#92;&quot;data_updated_at&#92;&quot;:&#92;&quot;2025-08-23T00:30:14.000Z&#92;&quot;,&#92;&quot;publication_date&#92;&quot;:&#92;&quot;2019-07-11T17:58:48.000Z&#92;&quot;},{&#92;&quot;id&#92;&quot;:&#92;&quot;ud3x-cvhp&#92;&quot;,&#92;&quot;name&#92;&quot;:&#92;&quot;Code Compliance Complaints by Year&#92;&quot;,&#92;&quot;description&#92;&quot;:&#92;&quot;Code Compliance complaints by type per year. Sort the Year column by descending order to see the most recent years.&#92;&quot;,&#92;&quot;attribution&#92;&quot;:&#92;&quot;Seattle Department of Construction and Inspections&#92;&quot;,&#92;&quot;type&#92;&quot;:&#92;&quot;dataset&#92;&quot;,&#92;&quot;updatedAt&#92;&quot;:&#92;&quot;2025-08-23T00:29:51.000Z&#92;&quot;,&#92;&quot;createdAt&#92;&quot;:&#92;&quot;2018-12-12T19:58:03.000Z&#92;&quot;,&#92;&quot;data_updated_at&#92;&quot;:&#92;&quot;2025-08-23T00:29:51.000Z&#92;&quot;,&#92;&quot;publication_date&#92;&quot;:&#92;&quot;2021-04-22T21:46:09.000Z&#92;&quot;}]&quot;' data-total-rows='132' data-total-columns='8' data-max-columns='50' data-banner-text='&quot;&quot;' data-pagination='true' data-page-size='10' data-field-types='[[&quot;name&quot;, [&quot;string&quot;, &quot;object&quot;]], [&quot;description&quot;, [&quot;string&quot;, &quot;object&quot;]], [&quot;attribution&quot;, [&quot;string&quot;, &quot;object&quot;]], [&quot;type&quot;, [&quot;string&quot;, &quot;object&quot;]], [&quot;updatedAt&quot;, [&quot;datetime&quot;, &quot;datetime64[ns, UTC]&quot;]], [&quot;createdAt&quot;, [&quot;datetime&quot;, &quot;datetime64[ns, UTC]&quot;]], [&quot;data_updated_at&quot;, [&quot;datetime&quot;, &quot;datetime64[ns, UTC]&quot;]], [&quot;publication_date&quot;, [&quot;datetime&quot;, &quot;datetime64[ns, UTC]&quot;]]]' data-show-filters='true' data-show-download='true' data-show-column-summaries='true' data-show-data-types='true' data-show-page-size-selector='true' data-show-column-explorer='true' data-show-chart-builder='true' data-row-headers='[[&quot;id&quot;, [&quot;string&quot;, &quot;object&quot;]]]' data-has-stable-row-id='false' data-lazy='false' data-preload='false'></marimo-table></marimo-ui-element>"}, "type": "data"}]}, {"code_hash": "10a495ee3099cc9db628d0e8da851bc7", "console": [], "id": "ROlb", "outputs": [{"data": {"text/html": "<span class=\"markdown prose dark:prose-invert\"><h2 id=\"detail-of-911-calls\">Detail of 911 calls</h2></span>"}, "type": "data"}]}, {"code_hash": "384738790fc9808ce76adc63981d76d0", "console": [], "id": "qnkX", "outputs": [{"data": {"text/plain": ""}, "type": "data"}]}, {"code_hash": "7d85abf074886160f8a301793966dc67", "console": [], "id": "TqIu", "outputs": [{"data": {"text/html": "<marimo-ui-element object-id='TqIu-0' random-id='216e9397-5d35-b939-c738-33fadf2cbb55'><marimo-table data-initial-value='[]' data-label='null' data-data='&quot;[{&#92;&quot;incident_number&#92;&quot;:&#92;&quot;F250115873&#92;&quot;,&#92;&quot;address&#92;&quot;:&#92;&quot;2637 Nw 58th St&#92;&quot;,&#92;&quot;type&#92;&quot;:&#92;&quot;Activated CO Detector&#92;&quot;,&#92;&quot;datetime&#92;&quot;:&#92;&quot;2025-08-21T22:10:00.000&#92;&quot;,&#92;&quot;latitude&#92;&quot;:&#92;&quot;47.67092&#92;&quot;,&#92;&quot;longitude&#92;&quot;:&#92;&quot;-122.390638&#92;&quot;,&#92;&quot;report_location&#92;&quot;:{&#92;&quot;type&#92;&quot;:&#92;&quot;Point&#92;&quot;,&#92;&quot;coordinates&#92;&quot;:[-122.390638,47.67092]}},{&#92;&quot;incident_number&#92;&quot;:&#92;&quot;F250115521&#92;&quot;,&#92;&quot;address&#92;&quot;:&#92;&quot;8513 24th Ave Nw&#92;&quot;,&#92;&quot;type&#92;&quot;:&#92;&quot;Activated CO Detector&#92;&quot;,&#92;&quot;datetime&#92;&quot;:&#92;&quot;2025-08-21T09:27:00.000&#92;&quot;,&#92;&quot;latitude&#92;&quot;:null,&#92;&quot;longitude&#92;&quot;:null,&#92;&quot;report_location&#92;&quot;:null},{&#92;&quot;incident_number&#92;&quot;:&#92;&quot;F250115138&#92;&quot;,&#92;&quot;address&#92;&quot;:&#92;&quot;4531 Purdue Ave Ne&#92;&quot;,&#92;&quot;type&#92;&quot;:&#92;&quot;Activated CO Detector&#92;&quot;,&#92;&quot;datetime&#92;&quot;:&#92;&quot;2025-08-20T23:03:00.000&#92;&quot;,&#92;&quot;latitude&#92;&quot;:&#92;&quot;47.671105&#92;&quot;,&#92;&quot;longitude&#92;&quot;:&#92;&quot;-122.279174&#92;&quot;,&#92;&quot;report_location&#92;&quot;:{&#92;&quot;type&#92;&quot;:&#92;&quot;Point&#92;&quot;,&#92;&quot;coordinates&#92;&quot;:[-122.279174,47.671105]}},{&#92;&quot;incident_number&#92;&quot;:&#92;&quot;F250114850&#92;&quot;,&#92;&quot;address&#92;&quot;:&#92;&quot;2803 E Pike St&#92;&quot;,&#92;&quot;type&#92;&quot;:&#92;&quot;Activated CO Detector&#92;&quot;,&#92;&quot;datetime&#92;&quot;:&#92;&quot;2025-08-20T12:12:00.000&#92;&quot;,&#92;&quot;latitude&#92;&quot;:&#92;&quot;47.614119&#92;&quot;,&#92;&quot;longitude&#92;&quot;:&#92;&quot;-122.296142&#92;&quot;,&#92;&quot;report_location&#92;&quot;:{&#92;&quot;type&#92;&quot;:&#92;&quot;Point&#92;&quot;,&#92;&quot;coordinates&#92;&quot;:[-122.296142,47.614119]}},{&#92;&quot;incident_number&#92;&quot;:&#92;&quot;F250114579&#92;&quot;,&#92;&quot;address&#92;&quot;:&#92;&quot;4711 Meridian Ave N&#92;&quot;,&#92;&quot;type&#92;&quot;:&#92;&quot;Activated CO Detector&#92;&quot;,&#92;&quot;datetime&#92;&quot;:&#92;&quot;2025-08-19T20:56:00.000&#92;&quot;,&#92;&quot;latitude&#92;&quot;:&#92;&quot;47.662939&#92;&quot;,&#92;&quot;longitude&#92;&quot;:&#92;&quot;-122.333736&#92;&quot;,&#92;&quot;report_location&#92;&quot;:{&#92;&quot;type&#92;&quot;:&#92;&quot;Point&#92;&quot;,&#92;&quot;coordinates&#92;&quot;:[-122.333736,47.662939]}},{&#92;&quot;incident_number&#92;&quot;:&#92;&quot;F250114560&#92;&quot;,&#92;&quot;address&#92;&quot;:&#92;&quot;7701 Aurora Ave N&#92;&quot;,&#92;&quot;type&#92;&quot;:&#92;&quot;Activated CO Detector&#92;&quot;,&#92;&quot;datetime&#92;&quot;:&#92;&quot;2025-08-19T20:03:00.000&#92;&quot;,&#92;&quot;latitude&#92;&quot;:&#92;&quot;47.684768&#92;&quot;,&#92;&quot;longitude&#92;&quot;:&#92;&quot;-122.344492&#92;&quot;,&#92;&quot;report_location&#92;&quot;:{&#92;&quot;type&#92;&quot;:&#92;&quot;Point&#92;&quot;,&#92;&quot;coordinates&#92;&quot;:[-122.344492,47.684768]}},{&#92;&quot;incident_number&#92;&quot;:&#92;&quot;F250113824&#92;&quot;,&#92;&quot;address&#92;&quot;:&#92;&quot;4040 54th Ave Sw&#92;&quot;,&#92;&quot;type&#92;&quot;:&#92;&quot;Activated CO Detector&#92;&quot;,&#92;&quot;datetime&#92;&quot;:&#92;&quot;2025-08-18T11:23:00.000&#92;&quot;,&#92;&quot;latitude&#92;&quot;:&#92;&quot;47.567828&#92;&quot;,&#92;&quot;longitude&#92;&quot;:&#92;&quot;-122.401778&#92;&quot;,&#92;&quot;report_location&#92;&quot;:{&#92;&quot;type&#92;&quot;:&#92;&quot;Point&#92;&quot;,&#92;&quot;coordinates&#92;&quot;:[-122.401778,47.567828]}},{&#92;&quot;incident_number&#92;&quot;:&#92;&quot;F250113750&#92;&quot;,&#92;&quot;address&#92;&quot;:&#92;&quot;135 W Comstock St&#92;&quot;,&#92;&quot;type&#92;&quot;:&#92;&quot;Activated CO Detector&#92;&quot;,&#92;&quot;datetime&#92;&quot;:&#92;&quot;2025-08-18T07:42:00.000&#92;&quot;,&#92;&quot;latitude&#92;&quot;:&#92;&quot;47.630446&#92;&quot;,&#92;&quot;longitude&#92;&quot;:&#92;&quot;-122.358362&#92;&quot;,&#92;&quot;report_location&#92;&quot;:{&#92;&quot;type&#92;&quot;:&#92;&quot;Point&#92;&quot;,&#92;&quot;coordinates&#92;&quot;:[-122.358362,47.630446]}},{&#92;&quot;incident_number&#92;&quot;:&#92;&quot;F250113668&#92;&quot;,&#92;&quot;address&#92;&quot;:&#92;&quot;13437 Greenwood Ave N&#92;&quot;,&#92;&quot;type&#92;&quot;:&#92;&quot;Activated CO Detector&#92;&quot;,&#92;&quot;datetime&#92;&quot;:&#92;&quot;2025-08-18T01:46:00.000&#92;&quot;,&#92;&quot;latitude&#92;&quot;:&#92;&quot;47.726227&#92;&quot;,&#92;&quot;longitude&#92;&quot;:&#92;&quot;-122.355554&#92;&quot;,&#92;&quot;report_location&#92;&quot;:{&#92;&quot;type&#92;&quot;:&#92;&quot;Point&#92;&quot;,&#92;&quot;coordinates&#92;&quot;:[-122.355554,47.726227]}},{&#92;&quot;incident_number&#92;&quot;:&#92;&quot;F250113666&#92;&quot;,&#92;&quot;address&#92;&quot;:&#92;&quot;10700 Lakeside Ave Ne&#92;&quot;,&#92;&quot;type&#92;&quot;:&#92;&quot;Activated CO Detector&#92;&quot;,&#92;&quot;datetime&#92;&quot;:&#92;&quot;2025-08-18T01:44:00.000&#92;&quot;,&#92;&quot;latitude&#92;&quot;:&#92;&quot;47.70772&#92;&quot;,&#92;&quot;longitude&#92;&quot;:&#92;&quot;-122.276091&#92;&quot;,&#92;&quot;report_location&#92;&quot;:{&#92;&quot;type&#92;&quot;:&#92;&quot;Point&#92;&quot;,&#92;&quot;coordinates&#92;&quot;:[-122.276091,47.70772]}}]&quot;' data-total-rows='65' data-total-columns='6' data-max-columns='50' data-banner-text='&quot;&quot;' data-pagination='true' data-page-size='10' data-field-types='[[&quot;address&quot;, [&quot;string&quot;, &quot;object&quot;]], [&quot;type&quot;, [&quot;string&quot;, &quot;object&quot;]], [&quot;datetime&quot;, [&quot;datetime&quot;, &quot;datetime64[ns]&quot;]], [&quot;latitude&quot;, [&quot;string&quot;, &quot;object&quot;]], [&quot;longitude&quot;, [&quot;string&quot;, &quot;object&quot;]], [&quot;report_location&quot;, [&quot;string&quot;, &quot;object&quot;]]]' data-show-filters='true' data-show-download='true' data-show-column-summaries='true' data-show-data-types='true' data-show-page-size-selector='true' data-show-column-explorer='true' data-show-chart-builder='true' data-row-headers='[[&quot;incident_number&quot;, [&quot;string&quot;, &quot;object&quot;]]]' data-has-stable-row-id='false' data-lazy='false' data-preload='false'></marimo-table></marimo-ui-element>"}, "type": "data"}]}], "metadata": {"marimo_version": "0.15.0"}, "version": "1"},
            "runtimeConfig": null,
        };
    </script>
  
<marimo-code hidden="">
    import%20marimo%0A%0A__generated_with%20%3D%20%220.15.0%22%0Aapp%20%3D%20marimo.App(width%3D%22medium%22)%0A%0A%0A%40app.cell%0Adef%20_()%3A%0A%20%20%20%20import%20os%0A%0A%20%20%20%20from%20dotenv%20import%20load_dotenv%0A%20%20%20%20import%20marimo%20as%20mo%0A%20%20%20%20import%20pandas%20as%20pd%0A%0A%20%20%20%20from%20dotgov.constants%20import%20SEATTLE%0A%20%20%20%20from%20dotgov.socrata%20import%20Socrata%2C%20create_where_clause%0A%20%20%20%20return%20SEATTLE%2C%20Socrata%2C%20create_where_clause%2C%20load_dotenv%2C%20mo%2C%20os%2C%20pd%0A%0A%0A%40app.cell%0Adef%20_(load_dotenv%2C%20os)%3A%0A%20%20%20%20_%20%3D%20load_dotenv()%0A%0A%20%20%20%20app_token%20%3D%20os.getenv(%22SOCRATA_TOKEN%22)%0A%20%20%20%20return%20(app_token%2C)%0A%0A%0A%40app.cell%0Adef%20_(mo)%3A%0A%20%20%20%20mo.md(r%22%22%22%23%23%20Discover%20datasets%20in%20Seattle%22%22%22)%0A%20%20%20%20return%0A%0A%0A%40app.cell%0Adef%20_(SEATTLE%2C%20Socrata%2C%20app_token)%3A%0A%20%20%20%20with%20Socrata(SEATTLE%2C%20app_token%3Dapp_token)%20as%20client%3A%0A%20%20%20%20%20%20%20%20datasets%20%3D%20%5Bdataset%20for%20dataset%20in%20client.discover()%5D%0A%0A%20%20%20%20print(f%22There%20are%20%7Blen(datasets)%7D%20datasets%20in%20%7BSEATTLE%7D%22)%0A%20%20%20%20return%20(datasets%2C)%0A%0A%0A%40app.cell%0Adef%20_(datasets%2C%20pd)%3A%0A%20%20%20%20cols%20%3D%20%5B%0A%20%20%20%20%20%20%20%20%22id%22%2C%0A%20%20%20%20%20%20%20%20%22name%22%2C%0A%20%20%20%20%20%20%20%20%22attribution%22%2C%0A%20%20%20%20%20%20%20%20%22description%22%2C%0A%20%20%20%20%20%20%20%20%22type%22%2C%0A%20%20%20%20%20%20%20%20%22createdAt%22%2C%0A%20%20%20%20%20%20%20%20%22updatedAt%22%2C%0A%20%20%20%20%20%20%20%20%22data_updated_at%22%2C%0A%20%20%20%20%20%20%20%20%22publication_date%22%2C%0A%20%20%20%20%5D%0A%0A%20%20%20%20resources%20%3D%20%5B%0A%20%20%20%20%20%20%20%20%7Bk%3A%20v%20for%20k%2C%20v%20in%20d.get(%22resource%22%2C%20%7B%7D).items()%20if%20k%20in%20cols%7D%0A%20%20%20%20%20%20%20%20for%20d%20in%20datasets%0A%20%20%20%20%5D%0A%0A%0A%20%20%20%20df_datasets%20%3D%20pd.DataFrame(resources)%0A%0A%20%20%20%20date_cols%20%3D%20%5B%22createdAt%22%2C%20%22updatedAt%22%2C%20%22data_updated_at%22%2C%20%22publication_date%22%5D%0A%0A%20%20%20%20df_datasets%5Bdate_cols%5D%20%3D%20df_datasets%5Bdate_cols%5D.apply(%0A%20%20%20%20%20%20%20%20pd.to_datetime%2C%20errors%3D%22coerce%22%0A%20%20%20%20)%0A%0A%20%20%20%20df_datasets%20%3D%20df_datasets.set_index(%22id%22).sort_values(%0A%20%20%20%20%20%20%20%20by%3D%22data_updated_at%22%2C%20ascending%3DFalse%0A%20%20%20%20)%0A%0A%20%20%20%20df_datasets%0A%20%20%20%20return%0A%0A%0A%40app.cell%0Adef%20_(mo)%3A%0A%20%20%20%20mo.md(r%22%22%22%23%23%20Detail%20of%20911%20calls%22%22%22)%0A%20%20%20%20return%0A%0A%0A%40app.cell%0Adef%20_(SEATTLE%2C%20Socrata%2C%20app_token%2C%20create_where_clause)%3A%0A%20%20%20%20calls_where%20%3D%20create_where_clause(%0A%20%20%20%20%20%20%20%20datetime%3D(%222025-08-01T00%3A00%3A00%22%2C%20%222025-08-21T23%3A59%3A59%22)%2C%0A%20%20%20%20%20%20%20%20type%3D%5B%0A%20%20%20%20%20%20%20%20%20%20%20%20%22Multiple%20Casualty%20Incident%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22Rescue%20Automobile%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22Activated%20CO%20Detector%22%2C%0A%20%20%20%20%20%20%20%20%5D%2C%0A%20%20%20%20)%0A%0A%20%20%20%20calls%20%3D%20%5B%5D%0A%0A%20%20%20%20with%20Socrata(SEATTLE%2C%20version%3D3.0%2C%20app_token%3Dapp_token)%20as%20s%3A%0A%20%20%20%20%20%20%20%20for%20qr%20in%20s.query_resource(%0A%20%20%20%20%20%20%20%20%20%20%20%20identifier%3D%22kzjm-xkqj%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20filters%3D%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22where%22%3A%20calls_where%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22order%22%3A%20%22datetime%20DESC%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22includeSystem%22%3A%20%22false%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22includeSynthetic%22%3A%20%22false%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20)%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20calls.append(qr)%0A%20%20%20%20return%20(calls%2C)%0A%0A%0A%40app.cell%0Adef%20_(calls%2C%20pd)%3A%0A%20%20%20%20df_calls%20%3D%20pd.DataFrame(calls)%0A%0A%20%20%20%20df_calls%5B%22datetime%22%5D%20%3D%20df_calls%5B%22datetime%22%5D.apply(%0A%20%20%20%20%20%20%20%20pd.to_datetime%2C%20errors%3D%22coerce%22%0A%20%20%20%20)%0A%0A%20%20%20%20df_calls%20%3D%20df_calls.set_index(%22incident_number%22).sort_values(%0A%20%20%20%20%20%20%20%20by%3D%22datetime%22%2C%20ascending%3DFalse%0A%20%20%20%20)%0A%0A%20%20%20%20df_calls%0A%20%20%20%20return%0A%0A%0Aif%20__name__%20%3D%3D%20%22__main__%22%3A%0A%20%20%20%20app.run()%0A
</marimo-code>

<marimo-code-hash hidden="">7362062cc6b256772dec63df65dbcfc1813f1d1a54fd3ab64008e70820e380e7</marimo-code-hash>
</body>
</html>
